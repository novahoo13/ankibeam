/* カスタム CSS（Tailwind とは別管理）
   目的: 状態表示やプロバイダ状態 UI など、
   Tailwind のユーティリティではなく独自意味を持つクラスのみを定義する。 */

/* 状态消息容器 - 固定高度避免布局跳动 */
.status-message,
#status-message,
#save-status,
#anki-status,
#config-management-status,
[id^="ai-status-"],
[id^="prompt-config-status"] {
  min-height: 1.5em; /* 确保至少1行高度 */
  line-height: 1.5;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* JavaScript から適用する状態色 */
.status-success { color: #10b981; /* green-500 */ }
.status-error   { color: #ef4444; /* red-500 */ }
.status-loading { color: #6b7280; /* gray-500 */ }
.status-warning { color: #f59e0b; /* amber-500 */ }

/* Header中状态消息的特殊样式（深色背景适配） */
header .status-success { color: #86efac; /* green-300 - 在深色背景下更显眼 */ }
header .status-error   { color: #fca5a5; /* red-300 */ }
header .status-loading { color: #d1d5db; /* gray-300 */ }
header .status-warning { color: #fcd34d; /* amber-300 */ }

/* Header中的状态消息特殊布局 */
header #status-message {
  min-height: auto; /* 覆盖通用的min-height设置 */
  font-size: 0.75rem; /* text-xs */
  white-space: nowrap; /* 防止文字换行 */
  max-width: 120px; /* 限制最大宽度 */
  overflow: hidden;
  text-overflow: ellipsis; /* 超长文本显示省略号 */
  justify-content: flex-end; /* 右对齐 */
}

/* ステータスインジケータ（丸色ドット） */
.status-indicator {
  width: 12px;
  height: 12px;
  border-radius: 50%;
  margin-right: 8px;
  flex-shrink: 0;
}
.status-indicator.healthy { background-color: #10b981; /* green-500 */ }
.status-indicator.error   { background-color: #ef4444; /* red-500 */ }
.status-indicator.unknown { background-color: #6b7280; /* gray-500 */ }


/* 动态字段状态样式 */
.filled {
  border-color: #10b981 !important; /* green-500 */
  background-color: #f0fdf4; /* green-50 */
}

.partially-filled {
  border-color: #f59e0b !important; /* amber-500 */
  background-color: #fffbeb; /* amber-50 */
}

.empty {
  border-color: #e5e7eb; /* gray-200 */
  background-color: #ffffff;
}

/* 字段填充状态动画 */
.filled, .partially-filled, .empty {
  transition: border-color 0.3s ease, background-color 0.3s ease;
}

/* 自动调整高度的文本框样式 */
.auto-resize-textarea {
  /* 平滑的高度变化过渡效果 */
  transition: height 0.15s ease-out;

  /* 确保行高一致性 */
  line-height: 1.5;

  /* 禁用手动调整大小 */
  resize: none;

  /* 隐藏滚动条在不需要时 */
  overflow-y: hidden;

  /* 最小高度确保至少显示一行 */
  min-height: 2.5rem;

  /* 最大高度限制为5行（大约7.5rem） */
  max-height: 7.5rem;
}


/* 聚焦时的样式优化 */
.auto-resize-textarea:focus {
  /* 保持平滑过渡 */
  transition: height 0.15s ease-out, border-color 0.2s ease, box-shadow 0.2s ease;
}

/* Promptエディタ用の追加スタイル */
.field-tag-btn {
  display: inline-flex;
  align-items: center;
  padding: 4px 10px;
  border-radius: 9999px;
  background-color: #e2e8f0; /* slate-200 */
  color: #0f172a; /* slate-900 */
  font-size: 0.75rem; /* text-xs */
  border: 1px solid #cbd5f5; /* slate-300 */
  cursor: pointer;
  transition: background-color 0.2s ease, border-color 0.2s ease;
}

.field-tag-btn:hover {
  background-color: #cbd5f5;
  border-color: #94a3b8;
}

.field-tag-btn:focus {
  outline: none;
  box-shadow: 0 0 0 2px rgba(100, 116, 139, 0.35);
}

.prompt-preview-area {
  font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, 'Liberation Mono', monospace;
  white-space: pre-wrap;
  word-break: break-word;
}
