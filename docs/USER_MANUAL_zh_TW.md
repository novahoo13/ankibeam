# 📖 AnkiBeam 使用手冊

**版本**：1.0  
**最後更新**：2026 年 1 月

---

## 目錄

1. [快速入門](#一快速入門)
2. [安裝設定](#二安裝設定)
3. [使用方法](#三使用方法)
4. [範本設定](#四範本設定)
5. [進階功能](#五進階功能)
6. [常見問題](#六常見問題)

---

## 一、快速入門

### 30 秒了解 AnkiBeam

AnkiBeam 是一款 Chrome 瀏覽器擴充功能，它能夠：

✅ **自動解析** - 輸入單字，AI 自動產生釋義、例句、發音等  
✅ **一鍵製卡** - 解析結果直接同步至 Anki  
✅ **網頁劃詞** - 在任意網頁選取文字，浮動面板即刻彈出

### 工作流程

```
┌─────────────────────────────────────────────────────────────┐
│                                                             │
│   📝 輸入文字          🤖 AI 解析          📚 寫入 Anki     │
│                                                             │
│   "vocabulary"   ──►   Word: vocabulary    ──►   ✅ 成功    │
│                        Reading: /vəˈkæbjəleri/              │
│                        Meaning: 詞彙表                      │
│                        Example: Build your...               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

---

## 二、安裝設定

### 2.1 前置需求

在使用本擴充功能之前，請確認：

| 序號 | 需求                  | 說明                                   |
| ---- | --------------------- | -------------------------------------- |
| ①    | 安裝 Anki             | [下載 Anki](https://apps.ankiweb.net/) |
| ②    | 安裝 AnkiConnect 外掛 | 參見下方步驟                           |
| ③    | 取得 AI API Key       | 至少設定一個 AI 供應商                 |

### 2.2 安裝 AnkiConnect

**步驟：**

1. 開啟 Anki 桌面版
2. 點選選單列 **工具** → **附加元件**
3. 點選 **取得附加元件**
4. 輸入外掛代碼：`2055492159`
5. 點選 **確定**，等待下載完成
6. **重新啟動 Anki**

> ⚠️ **重要**：每次使用本擴充功能時，請確認 Anki 處於執行狀態！

### 2.3 取得 AI API Key

本擴充功能支援三種 AI 供應商，選擇其中一個即可：

#### 方案一：Google Gemini（推薦 - 有免費額度）

1. 前往 [Google AI Studio](https://makersuite.google.com/app/apikey)
2. 登入你的 Google 帳號
3. 點選 **Create API Key**
4. 複製產生的 API Key

#### 方案二：OpenAI GPT

1. 前往 [OpenAI Platform](https://platform.openai.com/api-keys)
2. 登入或註冊帳號
3. 點選 **Create new secret key**
4. 複製產生的 API Key

#### 方案三：Anthropic Claude

1. 前往 [Anthropic Console](https://console.anthropic.com/)
2. 登入或註冊帳號
3. 進入 API Keys 頁面
4. 建立並複製 API Key

### 2.4 設定擴充功能

1. **開啟擴充功能設定頁面**
   - 右鍵點選擴充功能圖示 → 選擇 **選項**
   - 或點選擴充功能圖示 → 點選右上角 ⚙️ 設定按鈕

2. **設定 AI 服務**
   - 選擇你的 AI 供應商（如 Google Gemini）
   - 貼上你的 API Key
   - 點選 **測試連線** 確認設定正確

3. **設定 Anki 連線**
   - 確認 Anki 正在執行
   - 點選 **測試 Anki 連線**
   - 看到 ✅ 成功提示即可

4. **建立解析範本**（見第四章）

---

## 三、使用方法

### 3.1 方式一：Popup 彈窗模式

適用於：手動輸入單字、批次處理文字

**操作步驟：**

```
步驟 1                    步驟 2                    步驟 3
點選擴充功能圖示          輸入文字，點選「解析」      點選「寫入 Anki」
    │                        │                        │
    ▼                        ▼                        ▼
┌─────────┐             ┌─────────┐             ┌─────────┐
│ 🔌 圖示 │  ──────►    │ 📝 輸入 │  ──────►    │ ✅ 成功  │
│         │             │ vocabulary│             │         │
└─────────┘             │ [解析]  │             └─────────┘
                        └─────────┘
```

**詳細步驟：**

1. 點選瀏覽器工具列中的 **AnkiBeam** 圖示
2. 在輸入框中輸入要查詢的單字或短語
3. （選用）從下拉選單選擇解析範本
4. 點選 **「解析」** 按鈕
5. 等待 AI 解析完成，各欄位自動填入
6. 檢查並編輯產生的內容（如需要）
7. 點選 **「寫入 Anki」** 按鈕
8. 看到 ✅ 「寫入成功」提示，卡片已新增至 Anki

### 3.2 方式二：浮動助手模式

適用於：閱讀網頁時隨時查詞、快速製卡

**操作步驟：**

```
步驟 1                    步驟 2                    步驟 3
在網頁選取文字            點選浮動按鈕              在面板中確認寫入
    │                        │                        │
    ▼                        ▼                        ▼
 ─────────               ┌─────────┐             ┌─────────┐
│vocabulary│  ──────►    │ 🔘 按鈕 │  ──────►    │ 📋 面板 │
 ─────────               └─────────┘             │ [寫入]  │
                                                 └─────────┘
```

**詳細步驟：**

1. 在任意網頁中，用滑鼠 **選取** 你想查詢的文字
2. 選取後，文字附近會出現一個 **浮動按鈕** 🔘
3. 點選浮動按鈕
4. **浮動面板** 彈出，AI 自動開始解析
5. 解析完成後，檢視各欄位內容
6. （選用）編輯內容或切換範本
7. 點選 **「寫入」** 按鈕
8. 看到成功提示，卡片已新增

> 💡 **小技巧**：你可以點選 📌 圖釘按鈕固定面板，這樣切換頁面時面板不會消失。

### 3.3 範本切換

如果你建立了多個解析範本，可以隨時切換：

- **Popup 中**：在頂部下拉選單選擇範本
- **浮動面板中**：在面板頂部下拉選單選擇範本

切換範本後，如果之前已有解析結果，會提示你需要重新解析。

---

## 四、範本設定

### 4.1 什麼是解析範本？

解析範本定義了：

- AI 應該產生哪些欄位（如 Word、Meaning、Example）
- 這些欄位如何對應至 Anki 筆記範本
- AI 的解析指令（選用）

### 4.2 建立新範本

1. 開啟 **擴充功能設定頁面**
2. 切換至 **「範本管理」** 標籤頁
3. 點選 **「+ 新建範本」**
4. 填寫以下資訊：

| 欄位     | 說明              | 範例                |
| -------- | ----------------- | ------------------- |
| 範本名稱 | 便於辨識的名稱    | 「英語單字範本」    |
| 目標牌組 | Anki 中的牌組名稱 | 「英語學習::單字」  |
| 筆記類型 | Anki 中的筆記範本 | 「Basic」或自訂範本 |

5. **新增欄位**：

點選 **「+ 新增欄位」**，為每個需要的欄位設定：

| 設定項   | 說明                                 |
| -------- | ------------------------------------ |
| 欄位名稱 | 必須與 Anki 筆記範本中的欄位名稱一致 |
| 顯示名稱 | 在介面上顯示的友善名稱               |
| 解析指令 | 告訴 AI 如何填入該欄位（選用）       |

6. 點選 **「儲存範本」**

### 4.3 範本範例

#### 英語單字學習範本

```
範本名稱：英語單字學習
目標牌組：英語學習::單字
筆記類型：Basic-reversed

欄位設定：
┌──────────────┬───────────────────────────────────────┐
│ 欄位名稱     │ 解析指令                              │
├──────────────┼───────────────────────────────────────┤
│ Word         │ 輸入的單字本身                         │
│ Pronunciation│ 國際音標，如 /ˈvɑːkjəb(ə)l/          │
│ Meaning      │ 中文釋義，包含詞性                     │
│ Example      │ 1-2 個例句，附中文翻譯                 │
│ Etymology    │ 詞根詞源分析（如有）                   │
└──────────────┴───────────────────────────────────────┘
```

#### 日語學習範本

```
範本名稱：日語單字
目標牌組：日本語::語彙
筆記類型：Japanese-vocab

欄位設定：
┌──────────────┬───────────────────────────────────────┐
│ 欄位名稱     │ 解析指令                              │
├──────────────┼───────────────────────────────────────┤
│ 単語         │ 單字本身（日文）                       │
│ 読み方       │ 平假名讀音                            │
│ 意味         │ 中文或英文釋義                         │
│ 例文         │ 日文例句                              │
│ 備註         │ 用法說明、注意事項                     │
└──────────────┴───────────────────────────────────────┘
```

### 4.4 自訂 AI 提示詞

進階使用者可以完全自訂 AI 的解析提示詞：

1. 在範本編輯頁面，展開 **「進階設定」**
2. 在 **「自訂提示詞」** 文字框中編寫你的提示詞
3. 使用 `{{INPUT_TEXT}}` 佔位符表示使用者輸入

**範例：**

```
你是一位專業的英語詞彙教師。請分析以下單字：

{{INPUT_TEXT}}

請按照以下 JSON 格式輸出：
{
  "Word": "單字本身",
  "Pronunciation": "美式音標",
  "Meaning": "詳細的中英文釋義",
  "Example": "2 個例句，附中文翻譯",
  "Collocations": "常見搭配"
}
```

---

## 五、進階功能

### 5.1 多 AI 供應商切換

你可以設定多個 AI 供應商，系統會：

- 優先使用你設定的主供應商
- 當主供應商失敗時，自動切換至備用供應商

**設定方法**：在設定頁面的 AI 設定區域，可以為多個供應商設定 API Key。

### 5.2 健康檢查

在設定頁面，每個 AI 供應商都有一個 **「測試連線」** 按鈕：

- ✅ **Healthy** - 服務正常
- ⚠️ **Error** - 服務異常，顯示錯誤原因
- ❓ **Unknown** - 尚未測試

### 5.3 樣式設定

你可以自訂寫入 Anki 的內容樣式：

| 設定項   | 說明               | 預設值 |
| -------- | ------------------ | ------ |
| 字體大小 | 卡片內容的字體大小 | 14px   |
| 文字對齊 | 靠左/置中/靠右     | 靠左   |
| 行高     | 行距設定           | 1.4    |

### 5.4 語言設定

支援以下介面語言：

- 🇺🇸 English
- 🇨🇳 简体中文
- 🇹🇼 繁體中文
- 🇯🇵 日本語

變更方法：設定頁面 → 介面設定 → 語言選擇

---

## 六、常見問題

### Q1：Anki 連線失敗？

**症狀**：點選「寫入 Anki」時提示連線失敗

**解決方案**：

1. ✅ 確認 Anki 桌面版正在執行
2. ✅ 確認已安裝 AnkiConnect 外掛（代碼：2055492159）
3. ✅ 重新啟動 Anki 後重試
4. ✅ 檢查防火牆是否封鎖了 127.0.0.1:8765 連接埠

### Q2：AI 解析失敗？

**症狀**：點選「解析」按鈕後長時間無回應或報錯

**解決方案**：

1. ✅ 檢查 API Key 是否已正確設定
2. ✅ 確認 API Key 有足夠的配額
3. ✅ 嘗試切換至其他 AI 供應商
4. ✅ 檢查網路連線

### Q3：浮動助手沒有出現？

**症狀**：選取網頁文字後沒有看到浮動按鈕

**解決方案**：

1. ✅ 檢查設定中是否已啟用「浮動助手」功能
2. ✅ 重新整理目前網頁後重試
3. ✅ 某些網站（如 Chrome 內建頁面）不支援擴充功能指令碼

### Q4：寫入的卡片內容為空？

**症狀**：卡片建立成功但欄位是空的

**解決方案**：

1. ✅ 檢查範本的欄位名稱是否與 Anki 筆記範本一致
2. ✅ 確認 AI 解析結果已正確填入各欄位
3. ✅ 檢查是否選擇了正確的筆記類型

### Q5：如何更新擴充功能？

**Chrome 線上應用程式商店安裝**：自動更新

**手動安裝**：

1. 下載最新版本
2. 開啟 `chrome://extensions/`
3. 移除舊版本
4. 載入新版本

---

## 📞 取得協助

如果遇到其他問題：

1. 查看 [GitHub Issues](https://github.com/novahoo13/ankibeam/issues)
2. 提交新的 Issue 描述你的問題
3. 附上錯誤截圖和操作步驟

---

_感謝使用 AnkiBeam！祝學習愉快！_ 🎓
