# AnkiBeam

[English](../README.md) | [简体中文](README_zh_CN.md) | [繁體中文](README_zh_TW.md) | 日本語

辞書検索結果からAnkiカード作成を支援するAI搭載アシスタントです。

## ✨ 機能

- **AIスマート解析** — 単語やフレーズを入力すると、AIが自動的に意味、例文、語源などの豊富なコンテンツを生成
- **フローティングアシスタント** — 任意のWebページでテキストを選択し、ワンクリックでAI解析してAnkiに書き込み
- **カスタムテンプレート** — 出力フィールドを柔軟に設定し、さまざまなAnkiノートタイプに対応
- **複数のAIプロバイダーに対応** —
  - Google Gemini（デフォルト：`gemini-3-flash-preview`）
  - OpenAI GPT（デフォルト：`gpt-5.2`）
  - Anthropic Claude（デフォルト：`claude-opus-4-6`）
  - Groq（デフォルト：`llama-3.3-70b-versatile`）
  - DeepSeek（デフォルト：`deepseek-chat`）
  - Zhipu AI（デフォルト：`glm-4`）
  - Alibaba Qwen（デフォルト：`qwen-max`）
  - Moonshot AI（デフォルト：`kimi-k2.5`）
- **自動フェイルオーバー** — メインプロバイダーが利用できない場合、バックアッププロバイダーに自動切り替え
- **多言語UI** — English、简体中文、繁體中文、日本語

## 📦 インストール

### 前提条件

1. **Ankiデスクトップ版** — [Ankiをダウンロード](https://apps.ankiweb.net/)
2. **AnkiConnectプラグイン** — AnkiにAnkiConnectプラグインをインストール
   - Ankiを開く → ツール → アドオン → アドオンを取得
   - コードを入力：`2055492159`
   - Ankiを再起動

### 拡張機能のインストール

1. このリポジトリをダウンロードまたはクローン
2. Chromeで `chrome://extensions/` にアクセス
3. 「デベロッパーモード」を有効化
4. 「パッケージ化されていない拡張機能を読み込む」をクリック
5. プロジェクトフォルダを選択

## 🚀 使い方

### ポップアップモード

1. Chromeツールバーの AnkiBeam アイコンをクリック
2. 入力ボックスに検索したい単語またはフレーズを入力
3. 「解析」ボタンをクリックし、AIがコンテンツを自動生成
4. 解析結果を確認・編集
5. 「Ankiに書き込む」をクリックしてカードを保存

### フローティングアシスタントモード

1. 任意のWebページでテキストを選択
2. 表示されたフローティングボタンをクリック
3. フローティングパネルで解析結果を確認
4. 「書き込み」をクリックしてAnkiに保存

### 各種設定

インストール後、拡張機能アイコンを右クリック →「オプション」から設定ページにアクセスし、以下を設定できます：

- **AIプロバイダー** — プロバイダーを選択し、APIキーを入力
- **Anki接続** — デフォルトのデッキとノートタイプを設定
- **テンプレート管理** — カスタム解析テンプレートの作成・管理、フィールドマッピングおよびカスタムプロンプトの設定
- **スタイル設定** — Ankiカードに書き込むコンテンツのスタイルをカスタマイズ（フォントサイズ、テキストの配置、行の高さ）

> 📖 詳細な設定方法については、[ユーザーマニュアル](USER_MANUAL_ja.md)をご覧ください。

## ❓ よくある質問

### Ankiに接続できない？

1. Ankiデスクトップ版が実行中であることを確認
2. AnkiConnectプラグインがインストールされていることを確認（コード：`2055492159`）
3. Ankiを再起動して再試行

### AI解析に失敗した？

1. APIキーが正しく設定されているか確認
2. APIキーに十分なクォータがあるか確認
3. 別のAIプロバイダーに切り替えてみる

### フローティングアシスタントが表示されない？

1. 設定で「フローティングアシスタント」が有効になっているか確認
2. Webページをリロードして再試行
3. 一部の特殊なページ（Chromeの組み込みページなど）ではコンテンツスクリプトがサポートされていません

## 🔒 プライバシー

- すべてのAPIキーは暗号化してローカルに保存
- クエリ内容は設定されたAIプロバイダーにのみ送信
- 拡張機能はユーザーデータを一切収集しません
- 完全な[プライバシーポリシー](../PRIVACY.md)をご覧ください

## 🛠 開発

### 技術スタック

- Chrome Extension Manifest V3
- ES6 Modules
- Tailwind CSS

### ローカル開発

```bash
# 依存関係のインストール
npm install

# CSS変更の監視
npm run css:watch

# テストの実行
npm test
```

## 📄 ライセンス

[MIT License](../LICENSE)

## 💬 フィードバック・サポート

ご質問やご提案がございましたら、[Issue](https://github.com/novahoo13/ankibeam/issues) を送信してください。
